Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var r,o,s=0|e,m=Math.max(s>=0?s:n-Math.abs(s),0);for(;m<n;){if((r=i[m])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;m++}return!1}});var FORM_ELEMENTS=["DATALIST","INPUT","OPTGROUP","SELECT","TEXTAREA"];function cloneFormNodes(t,e){for(var i=new Array,n=0;n<t.length;n++){if(t[n].nodeName.includes("#"))i[n]=t[n].cloneNode(!0);else{i[n]=document.createElement(t[n].nodeName);for(var r=0,o=t[n].attributes.length;r<o;r++)i[n].setAttribute(t[n].attributes[r].name,t[n].attributes[r].value);FORM_ELEMENTS.includes(t[n].nodeName)?(i[n].name=e+t[n].name,i[n].id=e+t[n].id):"LABEL"==t[n].nodeName?i[n].setAttribute("for",e+t[n].getAttribute("for")):(t[n].id&&(i[n].id=e+t[n].id),t[n].name&&(i[n].name=e+t[n].name))}if(t[n].childNodes.length>0)for(var s=cloneFormNodes(t[n].childNodes,e),m=0,a=s.length;m<a;m++)i[n].appendChild(s[m])}return i}function Template(t,e,i){this.nodes=Array(),this.prefix=e,this.currentIteration=0,this.classList=[],this.removeButton=i||null;for(var n=0,r=t.classList.length;n<r;n++)this.classList.push(t.classList[n]);for(var o=0,s=t.childNodes.length;o<s;o++)this.nodes[o]=t.childNodes[0].cloneNode(!0),t.removeChild(t.childNodes[0]);this.createInstance=function(){for(var t,e="",i=document.createElement("div"),n=this.removeButton||document.createElement("div"),r=0,o=this.classList.length;r<o;r++)i.classList.add(this.classList[r]);i.classList.remove("multiform","multiform-item"),this.removeButton?n=this.removeButton.cloneNode(!0):n.innerHTML="Remove",n.setAttribute("type","button"),n.setAttribute("class","btn btn-danger multiform-remove"),this.prefix&&(e=this.prefix+"_"),e+=this.currentIteration.toString()+"-",i.id=e+"item_container",n.setAttribute("data-itemcontainer",i.id),t=cloneFormNodes(this.nodes,e);for(var s in t)i.appendChild(t[s]);return i.appendChild(n),this.currentIteration++,i}}function MultiformContainer(t,e){this.container=t,this.controlsContainer=document.createElement("div"),this.addButton=e||null,null==this.addButton&&(this.addButton=document.createElement("div"),this.addButton.innerHTML="Add"),this.addButton.setAttribute("type","button"),this.addButton.setAttribute("class","btn btn-success"),this.addButton.setAttribute("id","multiform-add"),this.controlsContainer.setAttribute("id","multiform-controls"),this.controlsContainer.appendChild(this.addButton),this.container.appendChild(this.controlsContainer),this.appendChild=function(t){this.container.appendChild(t),$(".multiform-remove").unbind("click"),$(".multiform-remove").click(function(){$("#"+$(this).data("itemcontainer")).remove()})}}!function(t){t.fn.multiForm=function(e,i){var n=this.filter(".multiform-item"),r=Array(),o=i||null,s=null,m=null;t(this.not(".multiform-item")).find("#multiform-add")[0]&&(s=t(this.not(".multiform-item")).find("#multiform-add")[0].cloneNode(!0),this.not(".multiform-item")[0].removeChild(t(this.not(".multiform-item")).find("#multiform-add")[0])),t(this.not(".multiform-item")).find("#multiform-remove")[0]&&(m=t(this.not(".multiform-item")).find("#multiform-remove")[0].cloneNode(!0),this.not(".multiform-item")[0].removeChild(t(this.not(".multiform-item")).find("#multiform-remove")[0]));var a=new Template(this.not(".multiform-item")[0],e,m),l=new MultiformContainer(this.not(".multiform-item")[0],s);l.container.classList=[],l.container.id="multiform-container";var d=0;for(n.length;d<n.length;d++)itemsArrayIndex=r.length,r[itemsArrayIndex]=new Template(n[d],e,m),r[itemsArrayIndex].currentIteration=d,l.appendChild(r[itemsArrayIndex].createInstance()),n[d].parentElement.removeChild(n[d]);return a.currentIteration=n.length,l.appendChild(a.createInstance()),t("#multiform-add").click(function(){l.appendChild(a.createInstance()),o&&o()}),this}}(jQuery);